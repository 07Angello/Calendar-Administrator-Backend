(this["webpackJsonpcalendar-fe"]=this["webpackJsonpcalendar-fe"]||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=a(8),s=a(21),i=a(67),u=a(4),m="[ui] Open modal",d="[ui] Close modal",p="[event] Set active",f="[event] Logout event",v="[event] Add new",b="[event] Clear active event",h="[event] Event updated",E="[event] Event deleted",g="[event] Events loaded",O="[auth] Finish checking login state",j="[auth] Login",w="[auth] Logout",y={modalOpen:!1},N=a(56),x={events:[],activeEvent:null},k={isChecking:!0},S=Object(s.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{modalOpen:!0});case d:return Object(u.a)(Object(u.a)({},e),{},{modalOpen:!1});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),{},{activeEvent:t.payload});case v:return Object(u.a)(Object(u.a)({},e),{},{events:[].concat(Object(N.a)(e.events),[t.payload])});case b:return Object(u.a)(Object(u.a)({},e),{},{activeEvent:null});case h:return Object(u.a)(Object(u.a)({},e),{},{events:e.events.map((function(e){return e._id===t.payload._id?t.payload:e}))});case E:return Object(u.a)(Object(u.a)({},e),{},{events:e.events.filter((function(t){return t._id!==e.activeEvent._id})),activeEvent:null});case g:return Object(u.a)(Object(u.a)({},e),{},{events:Object(N.a)(t.payload)});case f:return Object(u.a)({},x);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(u.a)(Object(u.a)({},e),{},{isChecking:!1},t.payload);case O:return Object(u.a)(Object(u.a)({},e),{},{isChecking:!1});case w:return{isChecking:!1};default:return e}}}),C="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,T=Object(s.e)(S,C(Object(s.a)(i.a))),D=a(14),A=(a(58),a(24)),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(D.a)(t,2),r=a[0],c=a[1],o=function(){c(e)},l=function(e){var t=e.target;c(Object(u.a)(Object(u.a)({},r),{},Object(A.a)({},t.name,t.value)))};return[r,l,o]},I=a(12),P=a.n(I),G=a(20),L="https://calendar-app-gabo.herokuapp.com/api",M=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(L,"/").concat(e);return"GET"===a?fetch(n):fetch(n,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(L,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===a?fetch(n,{method:a,headers:{"x-token":r}}):fetch(n,{method:a,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},q=a(10),B=a(16),H=a.n(B),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{end:H()(e.end).toDate(),start:H()(e.start).toDate()})}))},U=function(e){return{type:v,payload:e}},V=function(e){return{type:b}},z=function(e){return{type:h,payload:e}},W=function(){return{type:E}},F=function(e){return{type:g,payload:e}},X=function(e){return{type:j,payload:e}},Y=function(){return{type:O}},K=function(){return function(e){localStorage.clear(),e({type:f}),e(Q())}},Q=function(){return{type:w}},Z=function(){var e=Object(l.b)(),t=_({email:"",password:""}),n=Object(D.a)(t,2),c=n[0],o=n[1],s=c.email,i=c.password;return r.a.createElement("div",{className:"custom-container"},r.a.createElement("div",{className:"col-md-4 custom-form login-register-animation"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:a(80),className:"user-img",alt:"User icon"})),r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,"Calendar Events"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var a=Object(G.a)(P.a.mark((function a(n){var r,c,o,l,s;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M("auth",{email:e,password:t},"POST");case 2:return r=a.sent,a.next=5,r.json();case 5:c=a.sent,o=c.Data,l=c.Message,s=c.Token,l&&l.length>0?q.b.warn(l):(localStorage.setItem("token",s),localStorage.setItem("token-init-date",(new Date).getTime()),n(X({uid:o._id,name:o.name,email:o.email})),q.b.success("Welcome ".concat(o.name,"!")));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(s,i))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",value:s,onChange:o,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",value:i,onChange:o,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",className:"btnSubmit",value:"Login"})))),r.a.createElement("div",{className:"form-footer"},r.a.createElement("a",{className:"underlineHover",href:"/register"},"Register"))),r.a.createElement("h4",{className:"gabo"},"Angello G\xe1mez"))},$=function(){var e=Object(l.b)(),t=_({name:"",email:"",password:"",password2:""}),a=Object(D.a)(t,2),n=a[0],c=a[1],o=n.name,s=n.email,i=n.password,u=n.password2;return r.a.createElement("div",{className:"custom-container"},r.a.createElement("div",{className:"col-md-4 custom-form login-register-animation"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,"Register"),r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),i!==u)return q.b.warn("Password confirmation does not match.");e(function(e,t,a){return function(){var n=Object(G.a)(P.a.mark((function n(r){var c,o,l,s,i;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M("auth/register",{name:e,email:t,password:a},"POST");case 2:return c=n.sent,n.next=5,c.json();case 5:o=n.sent,l=o.Data,s=o.Message,i=o.Token,s&&s.length>0?q.b.warn(s):(localStorage.setItem("token",i),localStorage.setItem("token-init-date",(new Date).getTime()),r(X({uid:l._id,name:l.name,email:l.email})),q.b.success("Hello ".concat(l.name," enjoy Calendar App!")));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(o,s,i))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Name",name:"name",value:o,onChange:c,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",value:s,onChange:c,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",value:i,onChange:c,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Confirm Password",name:"password2",value:u,onChange:c,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",className:"btnSubmit",value:"Register"}))))),r.a.createElement("h4",{className:"gabo"},"Angello G\xe1mez"))},ee=a(55),te={previous:"<",next:">"},ae=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth})).name;return r.a.createElement("div",{className:"navbar navbar-dark bg-dark mb-4"},r.a.createElement("span",{className:"navbar-brand"},t),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){e(K())}},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null,"Salir")))},ne=function(){return{type:m}},re=function(){var e=Object(l.b)();return r.a.createElement("button",{className:"btn btn-primary fab",onClick:function(){e(ne())}},r.a.createElement("i",{className:"fas fa-plus"}))},ce=a(40),oe=a.n(ce),le=function(){var e=Object(l.b)();return r.a.createElement("button",{className:"btn btn-danger fab-danger",onClick:function(){oe.a.fire({title:"Delete Event?",text:"Are you sure you want to delete this event?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then((function(t){t.value&&e(function(){var e=Object(G.a)(P.a.mark((function e(t,a){var n,r,c,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().calendar.activeEvent._id,e.prev=1,e.next=4,R("events/".concat(n),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,(o=c.Message)&&o.length>0?q.b.warn(o):(t(W()),q.b.success("The event has beend DELETED.")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),q.b.error("An error has ocurred while the event was DELETING!");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}())}))}},r.a.createElement("i",{className:"fas fa-trash"}),r.a.createElement("span",null," Delete event"))},se=function(e){var t=e.event,a=t.title,n=t.user;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",null,a)),r.a.createElement("div",null,r.a.createElement("span",{style:{fontWeight:"100"}},r.a.createElement("i",{className:"fas fa-user",style:{marginRight:"5px"}}),n.name)))},ie=a(50),ue=a.n(ie),me=a(51),de=a.n(me),pe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};ue.a.setAppElement("#root");var fe=H()().minutes(0).seconds(0).add(1,"hours"),ve=fe.clone().add(1,"hours"),be={title:"",notes:"",start:fe.toDate(),end:ve.toDate()},he=function(){var e=Object(l.c)((function(e){return e.ui})).modalOpen,t=Object(l.c)((function(e){return e.calendar})).activeEvent,a=Object(l.b)(),c=Object(n.useState)(fe.toDate()),o=Object(D.a)(c,2),s=o[0],i=o[1],m=Object(n.useState)(ve.toDate()),p=Object(D.a)(m,2),f=p[0],v=p[1],b=Object(n.useState)(be),h=Object(D.a)(b,2),E=h[0],g=h[1],O=E.notes,j=E.title,w=E.start,y=E.end;Object(n.useEffect)((function(){g(t||be)}),[t,g]);var N=function(e){var t=e.target;g(Object(u.a)(Object(u.a)({},E),{},Object(A.a)({},t.name,t.value)))},x=function(){a({type:d}),a(V()),g(be)};return r.a.createElement("div",null,r.a.createElement(ue.a,{isOpen:e,onRequestClose:x,style:pe,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-background"},r.a.createElement("h1",null,t?"Edit event":"New Event"),r.a.createElement("hr",null),r.a.createElement("form",{className:"container",onSubmit:function(e){e.preventDefault();var n=H()(w),r=H()(y);if(n.isSameOrAfter(r))return oe.a.fire("Warning!","The END DATE should be greather than START DATE.","warning");a(t?function(e){return function(){var t=Object(G.a)(P.a.mark((function t(a){var n,r,c;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R("events/".concat(e._id),e,"PUT");case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,c=r.Message,console.log(c),c&&c.length>0?q.b.warn(c):(a(z(e)),q.b.success("This event has been updated.")),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),q.b.error("An error has ocurred while the event was UPDATING!");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(E):function(e){return function(){var t=Object(G.a)(P.a.mark((function t(a,n){var r,c,o,l,s,i,u;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth,c=r.uid,o=r.name,t.prev=1,t.next=4,R("events",e,"POST");case 4:return l=t.sent,t.next=7,l.json();case 7:s=t.sent,i=s.Message,u=s.Data,i&&i.length>0?q.b.warn(i):(e._id=u._id,e.user={uid:c,name:o},a(U(e)),q.b.success("The event has been successfully saved.")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0),q.b.error("An error has ocurred while the event was saving!");case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(E)),x()}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Title and notes"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Event Title",name:"title",autoComplete:"off",value:j,onChange:N,required:!0}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Short title description")),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{type:"text",className:"form-control",placeholder:"Notes",rows:"3",name:"notes",value:O,onChange:N}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Aditional information")),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Start date and time"),r.a.createElement(de.a,{onChange:function(e){i(e),g(Object(u.a)(Object(u.a)({},E),{},{start:e}))},value:s,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"End date and time"),r.a.createElement(de.a,{onChange:function(e){v(e),g(Object(u.a)(Object(u.a)({},E),{},{end:e}))},value:f,className:"form-control"})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block"},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Save")))))};a(114),a(115);H.a.locale("en-gb");var Ee=Object(ee.b)(H.a),ge=function(){var e=Object(l.c)((function(e){return e.calendar})),t=e.events,a=e.activeEvent,c=Object(l.c)((function(e){return e.auth})).uid,o=Object(l.b)(),s=Object(n.useState)(localStorage.getItem("lastView")||"month"),i=Object(D.a)(s,2),u=i[0],m=i[1];Object(n.useEffect)((function(){o(function(){var e=Object(G.a)(P.a.mark((function e(t){var a,n,r,c,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R("events");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=n.Message,c=n.Data,r&&r.length>0?q.b.warn(r):(o=J(c),t(F(o))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),q.b.error("An error has ocurred while the events were LOADING!");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[o]);return r.a.createElement("div",{className:"calendar-screen"},r.a.createElement(ae,null),r.a.createElement(ee.a,{localizer:Ee,events:t,startAccessor:"start",endAccessor:"end",messages:te,eventPropGetter:function(e,t,a,n){return{style:{backgroundColor:c===e.user._id||c===e.user.uid?"#367CF7":"#465660",borderRadius:"0px",opacity:.9,display:"block"}}},onDoubleClickEvent:function(e){o(ne())},onSelectEvent:function(e){o(function(e){return{type:p,payload:e}}(e))},onSelectSlot:function(e){o(V())},selectable:!0,onView:function(e){m(e),localStorage.setItem("lastView",e)},view:u,components:{event:se}}),r.a.createElement(he,null),a&&r.a.createElement(le,null),r.a.createElement(re,null))},Oe=a(36),je=a(9),we=a(41),ye=function(e){var t=e.isAuthenticated,a=e.component,n=Object(we.a)(e,["isAuthenticated","component"]);return r.a.createElement(je.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(je.a,{to:"/"}):r.a.createElement(a,e)}}))},Ne=function(e){var t=e.isAuthenticated,a=e.component,n=Object(we.a)(e,["isAuthenticated","component"]);return r.a.createElement(je.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(a,e):r.a.createElement(je.a,{to:"login"})}}))},xe=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth})),a=t.isChecking,c=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(G.a)(P.a.mark((function e(t){var a,n,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("auth/renew-token");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.Data,(c=n.Token)&&c.length>0?(localStorage.setItem("token",c),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:r._id,name:r.name}))):t(Y());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?r.a.createElement("h5",null,"Please wait a few seconds..."):r.a.createElement(Oe.a,null,r.a.createElement(je.d,null,r.a.createElement(ye,{exact:!0,path:"/login",component:Z,isAuthenticated:!!c}),r.a.createElement(ye,{exact:!0,path:"/register",component:$,isAuthenticated:!!c}),r.a.createElement(Ne,{exact:!0,path:"/",component:ge,isAuthenticated:!!c}),r.a.createElement(je.a,{to:"/"})))},ke=(a(116),function(){return r.a.createElement(l.a,{store:T},r.a.createElement(xe,null),r.a.createElement(q.a,{position:"top-right",newestOnTop:!0,autoClose:3500}))});a(117);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ke,null)),document.getElementById("root"))},58:function(e,t,a){},70:function(e,t,a){e.exports=a(118)},80:function(e,t,a){e.exports=a.p+"static/media/user.987813c7.svg"}},[[70,1,2]]]);
//# sourceMappingURL=main.65b3b1f9.chunk.js.map